---
layout: page
title: 归档
permalink: /archive/
---

{% if site.posts.size == 0 %}
  <h2>No post found</h2>
{% endif %}

<ul class="archive">
  {% assign current_year = nil %}
  {% assign current_month = nil %}

  {% for post in site.posts %}
    {% capture year %}{{ post.date | date: '%Y' }}{% endcapture %}
    {% capture month %}{{ post.date | date: '%m' }}{% endcapture %}

    {% if year != current_year %}
      {% unless current_year == nil %}
        </ul> <!-- Close previous month's list -->
      {% endunless %}
      {% unless current_month == nil %}
        </ul> <!-- Close previous year's list -->
      {% endunless %}
      <h2>{{ year }}</h2>
      {% assign current_year = year %}
      {% assign current_month = nil %}
    {% endif %}

    {% if month != current_month %}
      {% unless current_month == nil %}
        </ul> <!-- Close previous month's list -->
      {% endunless %}
      <h3>{{ post.date | date: '%B' }}</h3>
      <ul>
      {% assign current_month = month %}
    {% endif %}

    <li>
      {% if post.link %}
        <a href="{{ post.link }}">
      {% else %}
        <a href="{{ site.baseurl }}{{ post.url }}">
      {% endif %}
        {{ post.title }}
      </a>
      <time>{{ post.date | date: "%Y-%m-%d" }}</time>
    </li>
  {% endfor %}
  
  </ul> <!-- Close last month's list -->
  </ul> <!-- Close last year's list -->
</ul>