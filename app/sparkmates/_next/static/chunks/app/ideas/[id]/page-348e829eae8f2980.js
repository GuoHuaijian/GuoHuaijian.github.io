(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[669],{4365:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var i=r(89019),s=r(95155);let a=(0,i.A)((0,s.jsx)("path",{d:"M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4zM18 14H6v-2h12zm0-3H6V9h12zm0-3H6V6h12z"}),"Comment")},20910:(e,t,r)=>{"use strict";r.d(t,{default:()=>E});var i=r(95155),s=r(12115),a=r(63159),l=r(52269),n=r(44146),o=r(68086),c=r(3951),d=r(54265),x=r(55857),h=r(9670),m=r(81063),p=r(55398),A=r(20071),u=r(80158),v=r(32582),j=r(95439),g=r(40463),y=r(53537),f=r(34152),b=r(84256),w=r(83339),I=r(29414),S=r(89019);let k=(0,S.A)((0,i.jsx)("path",{d:"M1 21h4V9H1zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73z"}),"ThumbUp"),C=(0,S.A)((0,i.jsx)("path",{d:"M9 21h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.58 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2M9 9l4.34-4.34L12 10h9v2l-3 7H9zM1 9h4v12H1z"}),"ThumbUpOutlined");var L=r(66332),M=r(4365),W=r(91287);let B=(0,S.A)((0,i.jsx)("path",{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2m0 15-5-2.18L7 18V5h10z"}),"BookmarkBorder");var R=r(30723),z=r(26126),T=r(35695),H=r(25680),N=r(36971),V=r(59434),D=r(24988);let E=e=>{let{params:t}=e,r=(0,T.useRouter)(),{user:S}=(0,H.A)(),E=null==t?void 0:t.id,[F,_]=(0,s.useState)(null),[P,Z]=(0,s.useState)(null),[q,O]=(0,s.useState)([]),[U,Y]=(0,s.useState)(!0),[J,K]=(0,s.useState)(null),[X,G]=(0,s.useState)(!1),[Q,$]=(0,s.useState)(!1),[ee,et]=(0,s.useState)(""),[er,ei]=(0,s.useState)([]);(0,s.useEffect)(()=>{(async()=>{if(E)try{Y(!0);let e=await N.f3.getById(E);if(!e){K("创意不存在或已被删除");return}if(_(e),e.userId){let t=await N.Zw.getById(e.userId);Z(t)}let t=await Promise.all(e.collaborators.map(e=>"string"==typeof e?N.Zw.getById(e):null));O(t.filter(Boolean)),ei([{id:"1",userId:"user2",userName:"张伟",userAvatar:"/avatars/user2.jpg",content:"这个创意非常有前景，我认为可以从用户体验方面进一步完善。",createdAt:"2023-08-25T09:30:00Z",likes:3},{id:"2",userId:"user3",userName:"王芳",userAvatar:"/avatars/user3.jpg",content:"我有一些市场推广的想法，这个创意如果结合我们的营销策略，可以吸引更多目标用户。",createdAt:"2023-08-26T14:15:00Z",likes:2}])}catch(e){console.error("Error fetching idea details:",e),K("加载创意详情时出错")}finally{Y(!1)}})()},[E]);let es=async()=>{if(F&&S)try{r.push("/projects/new?ideaId=".concat(F.id))}catch(e){console.error("Error creating project:",e)}},ea=()=>{r.back()};return U?(0,i.jsx)(D.A,{sx:{mt:8},children:(0,i.jsxs)(a.A,{maxWidth:"lg",children:[(0,i.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",mb:4},children:[(0,i.jsx)(n.A,{onClick:ea,sx:{mr:2},children:(0,i.jsx)(I.A,{})}),(0,i.jsx)(o.A,{variant:"text",width:"50%",height:40})]}),(0,i.jsxs)(c.Ay,{container:!0,spacing:4,children:[(0,i.jsxs)(c.Ay,{item:!0,xs:12,md:8,children:[(0,i.jsx)(o.A,{variant:"rectangular",height:200,sx:{mb:2}}),(0,i.jsx)(o.A,{variant:"text",height:30,sx:{mb:1}}),(0,i.jsx)(o.A,{variant:"text",height:20}),(0,i.jsx)(o.A,{variant:"text",height:20}),(0,i.jsx)(o.A,{variant:"text",height:20}),(0,i.jsx)(o.A,{variant:"text",height:20}),(0,i.jsx)(o.A,{variant:"text",height:20})]}),(0,i.jsx)(c.Ay,{item:!0,xs:12,md:4,children:(0,i.jsx)(o.A,{variant:"rectangular",height:300})})]})]})}):J||!F?(0,i.jsx)(D.A,{sx:{mt:8},children:(0,i.jsxs)(a.A,{maxWidth:"lg",children:[(0,i.jsx)(d.A,{severity:"error",sx:{mt:4},children:J||"无法加载创意详情"}),(0,i.jsx)(l.A,{sx:{mt:2,textAlign:"center"},children:(0,i.jsx)(x.A,{variant:"outlined",onClick:ea,children:"返回上一页"})})]})}):(0,i.jsx)(D.A,{sx:{mt:8},children:(0,i.jsxs)(a.A,{maxWidth:"lg",children:[(0,i.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",mb:4},children:[(0,i.jsx)(n.A,{onClick:ea,sx:{mr:2},children:(0,i.jsx)(I.A,{})}),(0,i.jsx)(h.A,{variant:"h4",component:"h1",fontWeight:"bold",children:F.title})]}),(0,i.jsxs)(c.Ay,{container:!0,spacing:4,children:[(0,i.jsxs)(c.Ay,{item:!0,xs:12,md:8,children:[(0,i.jsxs)(m.A,{elevation:0,sx:{p:3,mb:4,borderRadius:2},children:[(0,i.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",mb:3},children:[(0,i.jsx)(p.A,{src:(0,V.TW)(null==P?void 0:P.avatar),alt:(null==P?void 0:P.name)||"",sx:{width:50,height:50,mr:2}}),(0,i.jsxs)(l.A,{children:[(0,i.jsx)(h.A,{variant:"subtitle1",fontWeight:"medium",children:(null==P?void 0:P.name)||"未知用户"}),(0,i.jsxs)(h.A,{variant:"body2",color:"text.secondary",children:["发布于 ",(0,V.Yq)(F.createdAt),F.updatedAt!==F.createdAt&&" \xb7 更新于 ".concat((0,V.Yq)(F.updatedAt))]})]})]}),(0,i.jsxs)(l.A,{sx:{mb:3},children:[(0,i.jsx)(A.A,{label:F.category,color:"primary",sx:{mr:1,mb:1}}),F.tags.map((e,t)=>(0,i.jsx)(A.A,{label:e,variant:"outlined",sx:{mr:1,mb:1}},t)),(0,i.jsx)(A.A,{label:"PUBLIC"===F.visibility?"公开":"私密",color:"PUBLIC"===F.visibility?"success":"default",variant:"outlined",sx:{mr:1,mb:1}})]}),(0,i.jsx)(u.A,{sx:{my:3}}),(0,i.jsx)(h.A,{variant:"body1",paragraph:!0,sx:{whiteSpace:"pre-line"},children:F.description}),(0,i.jsx)(u.A,{sx:{my:3}}),(0,i.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsxs)(l.A,{children:[(0,i.jsx)(n.A,{color:X?"primary":"default",onClick:()=>{G(!X),!X&&F?_({...F,likes:F.likes+1}):X&&F&&_({...F,likes:F.likes-1})},children:X?(0,i.jsx)(k,{}):(0,i.jsx)(C,{})}),(0,i.jsx)(h.A,{variant:"body2",component:"span",sx:{mr:2},children:F.likes}),(0,i.jsx)(n.A,{color:"default",children:(0,i.jsx)(L.A,{})}),(0,i.jsx)(h.A,{variant:"body2",component:"span",sx:{mr:2},children:F.views}),(0,i.jsx)(n.A,{color:"default",children:(0,i.jsx)(M.A,{})}),(0,i.jsx)(h.A,{variant:"body2",component:"span",children:F.comments})]}),(0,i.jsxs)(l.A,{children:[(0,i.jsx)(n.A,{color:Q?"primary":"default",onClick:()=>{$(!Q)},children:Q?(0,i.jsx)(W.A,{}):(0,i.jsx)(B,{})}),(0,i.jsx)(n.A,{color:"default",children:(0,i.jsx)(R.A,{})}),(0,i.jsx)(x.A,{variant:"contained",color:"primary",onClick:es,sx:{ml:1},children:"创建项目"})]})]})]}),(0,i.jsxs)(m.A,{elevation:0,sx:{p:3,borderRadius:2},children:[(0,i.jsxs)(h.A,{variant:"h6",gutterBottom:!0,children:["评论 (",F.comments,")"]}),S&&(0,i.jsxs)(l.A,{sx:{display:"flex",mb:4},children:[(0,i.jsx)(p.A,{src:(0,V.TW)(S.avatar),alt:S.name,sx:{mr:2}}),(0,i.jsx)(v.A,{fullWidth:!0,placeholder:"添加评论...",multiline:!0,rows:2,value:ee,onChange:e=>et(e.target.value),InputProps:{endAdornment:(0,i.jsx)(n.A,{color:"primary",onClick:()=>{if(!ee.trim()||!S)return;let e={id:"comment-".concat(Date.now()),userId:S.id,userName:S.name,userAvatar:S.avatar||"",content:ee,createdAt:new Date().toISOString(),likes:0};ei([e,...er]),et(""),F&&_({...F,comments:"number"==typeof F.comments?F.comments+1:Array.isArray(F.comments)?[...F.comments,e]:[e]})},disabled:!ee.trim(),sx:{alignSelf:"flex-end"},children:(0,i.jsx)(z.A,{})})}})]}),(0,i.jsxs)(j.A,{children:[er.map(e=>(0,i.jsxs)(s.Fragment,{children:[(0,i.jsxs)(g.Ay,{alignItems:"flex-start",sx:{px:0},children:[(0,i.jsx)(y.A,{children:(0,i.jsx)(p.A,{src:(0,V.TW)(e.userAvatar),alt:e.userName})}),(0,i.jsx)(f.A,{primary:(0,i.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,i.jsx)(h.A,{variant:"subtitle2",children:e.userName}),(0,i.jsx)(h.A,{variant:"caption",color:"text.secondary",children:(0,V.Yq)(e.createdAt)})]}),secondary:(0,i.jsxs)(l.A,{sx:{mt:1},children:[(0,i.jsx)(h.A,{variant:"body2",color:"text.primary",sx:{whiteSpace:"pre-line"},children:e.content}),(0,i.jsxs)(l.A,{sx:{mt:1,display:"flex",alignItems:"center"},children:[(0,i.jsx)(n.A,{size:"small",children:(0,i.jsx)(C,{fontSize:"small"})}),(0,i.jsx)(h.A,{variant:"caption",color:"text.secondary",children:e.likes})]})]})})]}),(0,i.jsx)(u.A,{variant:"inset",component:"li"})]},e.id)),0===er.length&&(0,i.jsx)(l.A,{sx:{textAlign:"center",py:4},children:(0,i.jsx)(h.A,{color:"text.secondary",children:"暂无评论，成为第一个评论的人吧！"})})]})]})]}),(0,i.jsxs)(c.Ay,{item:!0,xs:12,md:4,children:[(0,i.jsx)(b.A,{elevation:0,sx:{mb:4,borderRadius:2},children:(0,i.jsxs)(w.A,{children:[(0,i.jsx)(h.A,{variant:"h6",gutterBottom:!0,children:"协作者"}),(0,i.jsx)(j.A,{children:q.length>0?q.map(e=>(0,i.jsxs)(g.Ay,{sx:{px:0},children:[(0,i.jsx)(y.A,{children:(0,i.jsx)(p.A,{src:(0,V.TW)(e.avatar),alt:e.name})}),(0,i.jsx)(f.A,{primary:e.name,secondary:e.role})]},e.id)):(0,i.jsx)(h.A,{variant:"body2",color:"text.secondary",sx:{py:2},children:"暂无协作者"})}),S&&S.id!==F.userId&&(0,i.jsx)(x.A,{variant:"outlined",fullWidth:!0,sx:{mt:1},children:"申请协作"})]})}),(0,i.jsx)(b.A,{elevation:0,sx:{borderRadius:2},children:(0,i.jsxs)(w.A,{children:[(0,i.jsx)(h.A,{variant:"h6",gutterBottom:!0,children:"相关创意"}),(0,i.jsxs)(j.A,{children:[(0,i.jsx)(g.Ay,{component:"div",sx:{px:0,cursor:"pointer"},onClick:()=>r.push("/ideas/idea2"),children:(0,i.jsx)(f.A,{primary:"可持续时尚电商平台",secondary:"创建一个专注于可持续和道德时尚的电商平台..."})}),(0,i.jsx)(u.A,{component:"li"}),(0,i.jsx)(g.Ay,{component:"div",sx:{px:0,cursor:"pointer"},onClick:()=>r.push("/ideas/idea3"),children:(0,i.jsx)(f.A,{primary:"社区农业连接应用",secondary:"开发一个应用，连接本地农民与消费者..."})}),(0,i.jsx)(u.A,{component:"li"}),(0,i.jsx)(g.Ay,{component:"div",sx:{px:0,cursor:"pointer"},onClick:()=>r.push("/ideas/idea4"),children:(0,i.jsx)(f.A,{primary:"学习技能交换平台",secondary:"创建一个平台，让用户可以交换技能学习时间..."})})]})]})})]})]})]})})}},26126:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var i=r(89019),s=r(95155);let a=(0,i.A)((0,s.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send")},29414:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var i=r(89019),s=r(95155);let a=(0,i.A)((0,s.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack")},30723:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var i=r(89019),s=r(95155);let a=(0,i.A)((0,s.jsx)("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92"}),"Share")},53537:(e,t,r)=>{"use strict";r.d(t,{A:()=>A});var i=r(12115),s=r(52596),a=r(15386),l=r(45115),n=r(35881),o=r(82700),c=r(57692),d=r(81112);function x(e){return(0,d.Ay)("MuiListItemAvatar",e)}(0,c.A)("MuiListItemAvatar",["root","alignItemsFlexStart"]);var h=r(95155);let m=e=>{let{alignItems:t,classes:r}=e;return(0,a.A)({root:["root","flex-start"===t&&"alignItemsFlexStart"]},x,r)},p=(0,n.Ay)("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,"flex-start"===r.alignItems&&t.alignItemsFlexStart]}})({minWidth:56,flexShrink:0,variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}),A=i.forwardRef(function(e,t){let r=(0,o.b)({props:e,name:"MuiListItemAvatar"}),{className:a,...n}=r,c=i.useContext(l.A),d={...r,alignItems:c.alignItems},x=m(d);return(0,h.jsx)(p,{className:(0,s.A)(x.root,a),ownerState:d,ref:t,...n})})},59434:(e,t,r)=>{"use strict";r.d(t,{EJ:()=>l,TW:()=>i,Yq:()=>s,ZV:()=>a});let i=(e,t)=>e&&!e.includes("placeholder")?e:"/avatars/placeholder.svg",s=e=>{let t=new Date(e);return new Intl.DateTimeFormat("zh-CN",{year:"numeric",month:"long",day:"numeric"}).format(t)},a=e=>e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"k":e.toString(),l=(e,t)=>e.length<=t?e:e.slice(0,t)+"..."},66332:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var i=r(89019),s=r(95155);let a=(0,i.A)((0,s.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")},80158:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var i=r(12115),s=r(52596),a=r(15386),l=r(78894),n=r(35881),o=r(74409),c=r(82700),d=r(41090),x=r(95155);let h=e=>{let{absolute:t,children:r,classes:i,flexItem:s,light:l,orientation:n,textAlign:o,variant:c}=e;return(0,a.A)({root:["root",t&&"absolute",c,l&&"light","vertical"===n&&"vertical",s&&"flexItem",r&&"withChildren",r&&"vertical"===n&&"withChildrenVertical","right"===o&&"vertical"!==n&&"textAlignRight","left"===o&&"vertical"!==n&&"textAlignLeft"],wrapper:["wrapper","vertical"===n&&"wrapperVertical"]},d.K,i)},m=(0,n.Ay)("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,r.absolute&&t.absolute,t[r.variant],r.light&&t.light,"vertical"===r.orientation&&t.vertical,r.flexItem&&t.flexItem,r.children&&t.withChildren,r.children&&"vertical"===r.orientation&&t.withChildrenVertical,"right"===r.textAlign&&"vertical"!==r.orientation&&t.textAlignRight,"left"===r.textAlign&&"vertical"!==r.orientation&&t.textAlignLeft]}})((0,o.A)(e=>{let{theme:t}=e;return{margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:t.vars?"rgba(".concat(t.vars.palette.dividerChannel," / 0.08)"):(0,l.X4)(t.palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:t.spacing(2),marginRight:t.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:t.spacing(1),marginBottom:t.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:e=>{let{ownerState:t}=e;return!!t.children},style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:e=>{let{ownerState:t}=e;return t.children&&"vertical"!==t.orientation},style:{"&::before, &::after":{width:"100%",borderTop:"thin solid ".concat((t.vars||t).palette.divider),borderTopStyle:"inherit"}}},{props:e=>{let{ownerState:t}=e;return"vertical"===t.orientation&&t.children},style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:"thin solid ".concat((t.vars||t).palette.divider),borderLeftStyle:"inherit"}}},{props:e=>{let{ownerState:t}=e;return"right"===t.textAlign&&"vertical"!==t.orientation},style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:e=>{let{ownerState:t}=e;return"left"===t.textAlign&&"vertical"!==t.orientation},style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}})),p=(0,n.Ay)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.wrapper,"vertical"===r.orientation&&t.wrapperVertical]}})((0,o.A)(e=>{let{theme:t}=e;return{display:"inline-block",paddingLeft:"calc(".concat(t.spacing(1)," * 1.2)"),paddingRight:"calc(".concat(t.spacing(1)," * 1.2)"),whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:"calc(".concat(t.spacing(1)," * 1.2)"),paddingBottom:"calc(".concat(t.spacing(1)," * 1.2)")}}]}})),A=i.forwardRef(function(e,t){let r=(0,c.b)({props:e,name:"MuiDivider"}),{absolute:i=!1,children:a,className:l,orientation:n="horizontal",component:o=a||"vertical"===n?"div":"hr",flexItem:d=!1,light:A=!1,role:u="hr"!==o?"separator":void 0,textAlign:v="center",variant:j="fullWidth",...g}=r,y={...r,absolute:i,component:o,flexItem:d,light:A,orientation:n,role:u,textAlign:v,variant:j},f=h(y);return(0,x.jsx)(m,{as:o,className:(0,s.A)(f.root,l),role:u,ref:t,ownerState:y,"aria-orientation":"separator"===u&&("hr"!==o||"vertical"===n)?n:void 0,...g,children:a?(0,x.jsx)(p,{className:f.wrapper,ownerState:y,children:a}):null})});A&&(A.muiSkipListHighlight=!0);let u=A},88604:(e,t,r)=>{Promise.resolve().then(r.bind(r,20910))},91287:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var i=r(89019),s=r(95155);let a=(0,i.A)((0,s.jsx)("path",{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2"}),"Bookmark")}},e=>{var t=t=>e(e.s=t);e.O(0,[827,364,34,951,948,582,309,680,988,441,684,358],()=>t(88604)),_N_E=e.O()}]);