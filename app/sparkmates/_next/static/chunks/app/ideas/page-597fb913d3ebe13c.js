(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[993],{4365:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(89019),i=r(95155);let a=(0,s.A)((0,i.jsx)("path",{d:"M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4zM18 14H6v-2h12zm0-3H6V9h12zm0-3H6V6h12z"}),"Comment")},59434:(e,t,r)=>{"use strict";r.d(t,{EJ:()=>o,TW:()=>s,Yq:()=>i,ZV:()=>a});let s=(e,t)=>e&&!e.includes("placeholder")?e:"/avatars/placeholder.svg",i=e=>{let t=new Date(e);return new Intl.DateTimeFormat("zh-CN",{year:"numeric",month:"long",day:"numeric"}).format(t)},a=e=>e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"k":e.toString(),o=(e,t)=>e.length<=t?e:e.slice(0,t)+"..."},62411:(e,t,r)=>{Promise.resolve().then(r.bind(r,99448))},66332:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(89019),i=r(95155);let a=(0,s.A)((0,i.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")},67569:(e,t,r)=>{"use strict";r.d(t,{A:()=>v});var s=r(12115),i=r(52596),a=r(692),o=r(81112),n=r(15386),l=r(54750),c=r(65706),d=r(85926),x=r(74291),h=r(25138),p=r(26470),u=r(95155);let m=(0,x.A)(),g=(0,l.A)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function b(e){return(0,c.A)({props:e,name:"MuiStack",defaultTheme:m})}let A=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],y=({ownerState:e,theme:t})=>{let r={display:"flex",flexDirection:"column",...(0,h.NI)({theme:t},(0,h.kW)({values:e.direction,breakpoints:t.breakpoints.values}),e=>({flexDirection:e}))};if(e.spacing){let s=(0,p.LX)(t),i=Object.keys(t.breakpoints.values).reduce((t,r)=>(("object"==typeof e.spacing&&null!=e.spacing[r]||"object"==typeof e.direction&&null!=e.direction[r])&&(t[r]=!0),t),{}),o=(0,h.kW)({values:e.direction,base:i}),n=(0,h.kW)({values:e.spacing,base:i});"object"==typeof o&&Object.keys(o).forEach((e,t,r)=>{if(!o[e]){let s=t>0?o[r[t-1]]:"column";o[e]=s}}),r=(0,a.A)(r,(0,h.NI)({theme:t},n,(t,r)=>e.useFlexGap?{gap:(0,p._W)(s,t)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${A(r?o[r]:e.direction)}`]:(0,p._W)(s,t)}}))}return(0,h.iZ)(t.breakpoints,r)};var j=r(35881),f=r(82700);let v=function(e={}){let{createStyledComponent:t=g,useThemeProps:r=b,componentName:a="MuiStack"}=e,l=()=>(0,n.A)({root:["root"]},e=>(0,o.Ay)(a,e),{}),c=t(y);return s.forwardRef(function(e,t){let a=r(e),{component:o="div",direction:n="column",spacing:x=0,divider:h,children:p,className:m,useFlexGap:g=!1,...b}=(0,d.A)(a),A=l();return(0,u.jsx)(c,{as:o,ownerState:{direction:n,spacing:x,useFlexGap:g},ref:t,className:(0,i.A)(A.root,m),...b,children:h?function(e,t){let r=s.Children.toArray(e).filter(Boolean);return r.reduce((e,i,a)=>(e.push(i),a<r.length-1&&e.push(s.cloneElement(t,{key:`separator-${a}`})),e),[])}(p,h):p})})}({createStyledComponent:(0,j.Ay)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>(0,f.b)({props:e,name:"MuiStack"})})},99448:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>T});var s=r(95155),i=r(12115),a=r(52269),o=r(9670),n=r(3951),l=r(32582),c=r(70680),d=r(77498),x=r(80329),h=r(7782),p=r(50095),u=r(55857),m=r(84256),g=r(64637),b=r(55398),A=r(80158),y=r(83339),j=r(20071),f=r(67569),v=r(1704),w=r(84092),k=r(15843);let C=(0,r(89019).A)((0,s.jsx)("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3m-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05"}),"FavoriteBorder");var S=r(66332),I=r(4365),R=r(35695),M=r(25680),W=r(36971),z=r(59434),L=r(24988);let T=()=>{let{user:e}=(0,M.A)(),t=(0,R.useRouter)(),[r,T]=(0,i.useState)([]),[B,E]=(0,i.useState)(!0),[P,_]=(0,i.useState)(""),[D,N]=(0,i.useState)("all"),[V,F]=(0,i.useState)("newest"),[O,H]=(0,i.useState)(1),[Y,Z]=(0,i.useState)([]);(0,i.useEffect)(()=>{(async()=>{try{E(!0);let e=await W.f3.getAll();T(e)}catch(e){console.error("Error fetching ideas:",e)}finally{E(!1)}})()},[]),(0,i.useEffect)(()=>{let e=[...r];P&&(e=e.filter(e=>e.title.toLowerCase().includes(P.toLowerCase())||e.description.toLowerCase().includes(P.toLowerCase())||e.tags.some(e=>e.toLowerCase().includes(P.toLowerCase())))),"all"!==D&&(e=e.filter(e=>e.category===D)),"newest"===V?e.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()):"popular"===V?e.sort((e,t)=>t.likes-e.likes):"views"===V&&e.sort((e,t)=>(t.views||0)-(e.views||0)),Z(e)},[r,P,D,V]);let U=(O-1)*8,q=Y.slice(U,U+8),G=Math.ceil(Y.length/8),$=["all",...Array.from(new Set(r.map(e=>e.category)))];return B?(0,s.jsx)(L.A,{children:(0,s.jsx)(a.A,{sx:{textAlign:"center",py:8},children:(0,s.jsx)(o.A,{children:"加载中..."})})}):(0,s.jsxs)(L.A,{sx:{mt:8},children:[(0,s.jsxs)(a.A,{sx:{mb:4,position:"relative","&::before":{content:'""',position:"absolute",left:0,top:"50%",width:4,height:"40px",transform:"translateY(-50%)",background:"linear-gradient(to bottom, #1976d2, #42a5f5)",borderRadius:"0 4px 4px 0"},pl:3},children:[(0,s.jsx)(o.A,{variant:"h4",component:"h1",gutterBottom:!0,sx:{fontWeight:700},children:"创意库"}),(0,s.jsx)(o.A,{variant:"body1",color:"text.secondary",children:"浏览社区分享的创意，或发布您自己的创意"})]}),(0,s.jsx)(a.A,{sx:{mb:4,p:3,borderRadius:2,background:"linear-gradient(to right, rgba(25, 118, 210, 0.03), rgba(66, 165, 245, 0.07))",boxShadow:"0 1px 5px rgba(0, 0, 0, 0.03)",border:"1px solid rgba(33, 150, 243, 0.08)"},children:(0,s.jsxs)(n.Ay,{container:!0,spacing:2,children:[(0,s.jsx)(n.Ay,{item:!0,xs:12,md:5,children:(0,s.jsx)(l.A,{fullWidth:!0,placeholder:"搜索创意、标签或描述",value:P,onChange:e=>_(e.target.value),InputProps:{startAdornment:(0,s.jsx)(c.A,{position:"start",children:(0,s.jsx)(w.A,{sx:{color:"primary.main"}})}),sx:{borderRadius:1.5,"&.MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"primary.light"},"&.Mui-focused fieldset":{borderColor:"primary.main"}}}}})}),(0,s.jsx)(n.Ay,{item:!0,xs:6,md:2,children:(0,s.jsxs)(d.A,{fullWidth:!0,children:[(0,s.jsx)(x.A,{id:"category-label",children:"分类"}),(0,s.jsxs)(h.A,{labelId:"category-label",value:D,label:"分类",onChange:e=>N(e.target.value),sx:{borderRadius:1.5},children:[(0,s.jsx)(p.A,{value:"all",children:"全部分类"}),$.filter(e=>"all"!==e).map(e=>(0,s.jsx)(p.A,{value:e,children:e},e))]})]})}),(0,s.jsx)(n.Ay,{item:!0,xs:6,md:2,children:(0,s.jsxs)(d.A,{fullWidth:!0,children:[(0,s.jsx)(x.A,{id:"sort-label",children:"排序"}),(0,s.jsxs)(h.A,{labelId:"sort-label",value:V,label:"排序",onChange:e=>F(e.target.value),sx:{borderRadius:1.5},children:[(0,s.jsx)(p.A,{value:"newest",children:"最新发布"}),(0,s.jsx)(p.A,{value:"popular",children:"最受欢迎"}),(0,s.jsx)(p.A,{value:"views",children:"浏览最多"})]})]})}),(0,s.jsx)(n.Ay,{item:!0,xs:12,md:3,sx:{display:"flex",justifyContent:{xs:"center",md:"flex-end"}},children:(0,s.jsx)(u.A,{variant:"contained",startIcon:(0,s.jsx)(k.A,{}),onClick:()=>t.push("/ideas/new"),sx:{height:"100%",boxShadow:"0 4px 12px rgba(33, 150, 243, 0.2)",background:"linear-gradient(45deg, #1976d2 30%, #42a5f5 90%)",transition:"all 0.3s ease","&:hover":{background:"linear-gradient(45deg, #0d47a1 30%, #1976d2 90%)",boxShadow:"0 6px 20px rgba(33, 150, 243, 0.3)",transform:"translateY(-2px)"}},children:"发布创意"})})]})}),(0,s.jsx)(n.Ay,{container:!0,spacing:3,children:q.length>0?q.map(e=>(0,s.jsx)(n.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,s.jsxs)(m.A,{elevation:1,sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.2s, box-shadow 0.2s",borderRadius:2,overflow:"hidden",border:"1px solid rgba(33, 150, 243, 0.08)",position:"relative","&:hover":{transform:"translateY(-8px)",boxShadow:"0 8px 24px rgba(33, 150, 243, 0.15)"},cursor:"pointer","&::after":{content:'""',position:"absolute",top:0,left:0,right:0,height:"4px",background:"linear-gradient(90deg, #1976d2, #64B5F6)",opacity:0,transition:"opacity 0.3s ease"},"&:hover::after":{opacity:1}},onClick:()=>t.push("/ideas/".concat(e.id)),children:[(0,s.jsx)(g.A,{avatar:(0,s.jsx)(b.A,{src:(0,z.TW)(),alt:"用户".concat(e.userId||"Unknown"),sx:{border:"2px solid rgba(33, 150, 243, 0.2)"}}),title:e.title,subheader:(0,z.Yq)(e.createdAt),titleTypographyProps:{noWrap:!0,fontWeight:600,color:"#1e293b"},subheaderTypographyProps:{color:"text.secondary"},sx:{pb:1}}),(0,s.jsx)(A.A,{}),(0,s.jsxs)(y.A,{sx:{flexGrow:1,pt:2},children:[(0,s.jsx)(o.A,{variant:"body2",color:"text.secondary",sx:{display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden",mb:2,height:60,lineHeight:1.5},children:e.description}),(0,s.jsxs)(a.A,{sx:{mb:2},children:[(0,s.jsx)(j.A,{label:e.category,size:"small",color:"primary",variant:"outlined",sx:{mr:1,borderRadius:"6px"}}),e.tags.slice(0,3).map((e,t)=>(0,s.jsx)(o.A,{component:"span",sx:{display:"inline-block"},children:(0,s.jsx)(j.A,{label:e,size:"small",variant:"outlined",sx:{mr:.5,mb:.5}})},t)),e.tags.length>3&&(0,s.jsxs)(o.A,{variant:"caption",component:"span",children:["+",e.tags.length-3]})]}),(0,s.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",pt:1,borderTop:"1px solid rgba(33, 150, 243, 0.08)",justifyContent:"space-between"},children:[(0,s.jsxs)(f.A,{direction:"row",spacing:2,alignItems:"center",children:[(0,s.jsxs)(a.A,{sx:{display:"flex",alignItems:"center"},children:[(0,s.jsx)(C,{sx:{fontSize:18,color:"error.main",mr:.5}}),(0,s.jsx)(o.A,{variant:"caption",color:"text.secondary",children:(0,z.ZV)(e.likes)})]}),(0,s.jsxs)(a.A,{sx:{display:"flex",alignItems:"center"},children:[(0,s.jsx)(S.A,{sx:{fontSize:18,color:"primary.main",mr:.5}}),(0,s.jsx)(o.A,{variant:"caption",color:"text.secondary",children:(0,z.ZV)(e.views||0)})]}),(0,s.jsxs)(a.A,{sx:{display:"flex",alignItems:"center"},children:[(0,s.jsx)(I.A,{sx:{fontSize:18,color:"text.secondary",mr:.5}}),(0,s.jsx)(o.A,{variant:"caption",color:"text.secondary",children:(0,z.ZV)("number"==typeof e.comments?e.comments:Array.isArray(e.comments)?e.comments.length:0)})]})]}),(0,s.jsx)(j.A,{label:"PUBLIC"===e.visibility?"公开":"私密",size:"small",color:"PUBLIC"===e.visibility?"success":"default",sx:{borderRadius:"6px",height:"22px","& .MuiChip-label":{px:1,py:.1,fontSize:"0.65rem"}}})]})]})]})},e.id)):(0,s.jsx)(n.Ay,{item:!0,xs:12,children:(0,s.jsxs)(a.A,{sx:{textAlign:"center",py:8,bgcolor:"rgba(33, 150, 243, 0.03)",borderRadius:2,border:"1px dashed rgba(33, 150, 243, 0.2)"},children:[(0,s.jsx)(o.A,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"没有找到符合条件的创意"}),(0,s.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"尝试调整搜索条件或发布一个新创意"}),(0,s.jsx)(u.A,{variant:"contained",startIcon:(0,s.jsx)(k.A,{}),sx:{mt:3},onClick:()=>t.push("/ideas/new"),children:"发布创意"})]})})}),G>1&&(0,s.jsx)(a.A,{sx:{mt:6,display:"flex",justifyContent:"center"},children:(0,s.jsx)(v.A,{count:G,page:O,onChange:(e,t)=>H(t),color:"primary",shape:"rounded",sx:{"& .MuiPaginationItem-root":{borderRadius:1}}})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[827,364,34,951,948,582,165,680,988,441,684,358],()=>t(62411)),_N_E=e.O()}]);