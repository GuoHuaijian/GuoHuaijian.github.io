(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[893],{42243:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>z});var r=s(95155),a=s(12115),n=s(52269),l=s(9670),i=s(3951),o=s(32582),d=s(70680),c=s(77498),x=s(80329),h=s(7782),p=s(50095),u=s(55857),g=s(84256),m=s(64637),A=s(55398),b=s(80158),j=s(83339),y=s(34152),f=s(20071),v=s(7433),w=s(1e4),C=s(1704),S=s(84092),k=s(15843),I=s(75125),R=s(9757),W=s(35695),M=s(25680),D=s(36971),E=s(59434),T=s(24988);let z=()=>{let{user:e}=(0,M.A)(),t=(0,W.useRouter)(),[s,z]=(0,a.useState)([]),[L,P]=(0,a.useState)(!0),[Y,_]=(0,a.useState)(""),[q,F]=(0,a.useState)("all"),[N,O]=(0,a.useState)("all"),[B,G]=(0,a.useState)("newest"),[H,J]=(0,a.useState)(1),[V,Z]=(0,a.useState)([]);(0,a.useEffect)(()=>{(async()=>{try{P(!0);let e=await D.hI.getAll();z(e)}catch(e){console.error("Error fetching projects:",e)}finally{P(!1)}})()},[]),(0,a.useEffect)(()=>{let e=[...s];Y&&(e=e.filter(e=>e.title.toLowerCase().includes(Y.toLowerCase())||e.description.toLowerCase().includes(Y.toLowerCase())||e.tags.some(e=>e.toLowerCase().includes(Y.toLowerCase())))),"all"!==q&&(e=e.filter(e=>e.category===q)),"all"!==N&&(e=e.filter(e=>e.status===N)),"newest"===B?e.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()):"progress"===B&&e.sort((e,t)=>(t.progress||0)-(e.progress||0)),Z(e)},[s,Y,q,N,B]);let K=(H-1)*6,Q=V.slice(K,K+6),U=Math.ceil(V.length/6),X=["all",...Array.from(new Set(s.map(e=>e.category)))],$=["all",...Array.from(new Set(s.map(e=>e.status)))];return L?(0,r.jsx)(T.A,{children:(0,r.jsx)(n.A,{sx:{textAlign:"center",py:8},children:(0,r.jsx)(l.A,{children:"加载中..."})})}):(0,r.jsxs)(T.A,{sx:{mt:8},children:[(0,r.jsxs)(n.A,{sx:{mb:4,position:"relative","&::before":{content:'""',position:"absolute",left:0,top:"50%",width:4,height:"40px",transform:"translateY(-50%)",background:"linear-gradient(to bottom, #1976d2, #42a5f5)",borderRadius:"0 4px 4px 0"},pl:3},children:[(0,r.jsx)(l.A,{variant:"h4",component:"h1",gutterBottom:!0,sx:{fontWeight:700},children:"项目列表"}),(0,r.jsx)(l.A,{variant:"body1",color:"text.secondary",children:"浏览所有进行中的项目，或创建一个新项目"})]}),(0,r.jsx)(n.A,{sx:{mb:4,p:3,borderRadius:2,background:"linear-gradient(to right, rgba(25, 118, 210, 0.03), rgba(66, 165, 245, 0.07))",boxShadow:"0 1px 5px rgba(0, 0, 0, 0.03)",border:"1px solid rgba(33, 150, 243, 0.08)"},children:(0,r.jsxs)(i.Ay,{container:!0,spacing:2,children:[(0,r.jsx)(i.Ay,{item:!0,xs:12,md:4,children:(0,r.jsx)(o.A,{fullWidth:!0,placeholder:"搜索项目、标签或描述",value:Y,onChange:e=>_(e.target.value),InputProps:{startAdornment:(0,r.jsx)(d.A,{position:"start",children:(0,r.jsx)(S.A,{sx:{color:"primary.main"}})}),sx:{borderRadius:1.5,"&.MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"primary.light"},"&.Mui-focused fieldset":{borderColor:"primary.main"}}}}})}),(0,r.jsx)(i.Ay,{item:!0,xs:12,sm:6,md:2,children:(0,r.jsxs)(c.A,{fullWidth:!0,children:[(0,r.jsx)(x.A,{id:"category-label",children:"分类"}),(0,r.jsxs)(h.A,{labelId:"category-label",value:q,label:"分类",onChange:e=>F(e.target.value),sx:{borderRadius:1.5},children:[(0,r.jsx)(p.A,{value:"all",children:"全部分类"}),X.filter(e=>"all"!==e).map(e=>(0,r.jsx)(p.A,{value:e,children:e},e))]})]})}),(0,r.jsx)(i.Ay,{item:!0,xs:12,sm:6,md:2,children:(0,r.jsxs)(c.A,{fullWidth:!0,children:[(0,r.jsx)(x.A,{id:"status-label",children:"状态"}),(0,r.jsxs)(h.A,{labelId:"status-label",value:N,label:"状态",onChange:e=>O(e.target.value),sx:{borderRadius:1.5},children:[(0,r.jsx)(p.A,{value:"all",children:"所有状态"}),$.filter(e=>"all"!==e).map(e=>(0,r.jsx)(p.A,{value:e,children:e},e))]})]})}),(0,r.jsx)(i.Ay,{item:!0,xs:12,sm:6,md:2,children:(0,r.jsxs)(c.A,{fullWidth:!0,children:[(0,r.jsx)(x.A,{id:"sort-label",children:"排序"}),(0,r.jsxs)(h.A,{labelId:"sort-label",value:B,label:"排序",onChange:e=>G(e.target.value),sx:{borderRadius:1.5},children:[(0,r.jsx)(p.A,{value:"newest",children:"最新创建"}),(0,r.jsx)(p.A,{value:"progress",children:"进度优先"})]})]})}),(0,r.jsx)(i.Ay,{item:!0,xs:12,sm:6,md:2,sx:{display:"flex",justifyContent:{xs:"center",md:"flex-end"}},children:(0,r.jsx)(u.A,{variant:"contained",startIcon:(0,r.jsx)(k.A,{}),onClick:()=>t.push("/projects/new"),sx:{height:"100%",boxShadow:"0 4px 12px rgba(33, 150, 243, 0.2)",background:"linear-gradient(45deg, #1976d2 30%, #42a5f5 90%)",transition:"all 0.3s ease","&:hover":{background:"linear-gradient(45deg, #0d47a1 30%, #1976d2 90%)",boxShadow:"0 6px 20px rgba(33, 150, 243, 0.3)",transform:"translateY(-2px)"}},children:"创建项目"})})]})}),(0,r.jsx)(i.Ay,{container:!0,spacing:3,children:Q.length>0?Q.map(e=>{var s,a;return(0,r.jsx)(i.Ay,{item:!0,xs:12,sm:6,md:6,lg:4,children:(0,r.jsxs)(g.A,{elevation:1,sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.2s, box-shadow 0.2s",borderRadius:2,overflow:"hidden",border:"1px solid rgba(33, 150, 243, 0.08)",position:"relative","&:hover":{transform:"translateY(-8px)",boxShadow:"0 8px 24px rgba(33, 150, 243, 0.15)"},cursor:"pointer","&::after":{content:'""',position:"absolute",top:0,left:0,right:0,height:"4px",background:"linear-gradient(90deg, #1976d2, #64B5F6)",opacity:0,transition:"opacity 0.3s ease"},"&:hover::after":{opacity:1}},onClick:()=>t.push("/projects/".concat(e.id)),children:[(0,r.jsx)(m.A,{avatar:(0,r.jsx)(A.A,{src:(0,E.TW)(),alt:"用户".concat(e.creatorId),sx:{border:"2px solid rgba(33, 150, 243, 0.2)"}}),title:e.title,subheader:(0,E.Yq)(e.createdAt),titleTypographyProps:{noWrap:!0,fontWeight:600,color:"#1e293b"},subheaderTypographyProps:{color:"text.secondary"}}),(0,r.jsx)(b.A,{}),(0,r.jsxs)(j.A,{sx:{flexGrow:1},children:[(0,r.jsx)(y.A,{primary:(0,r.jsxs)(n.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsx)(l.A,{variant:"subtitle1",fontWeight:"medium",children:e.title}),(0,r.jsx)(f.A,{label:e.status,size:"small",color:"已完成"===e.status?"success":"进行中"===e.status?"primary":"default"})]}),secondary:(0,r.jsxs)(n.A,{sx:{mt:1},component:"span",children:[(0,r.jsxs)(l.A,{variant:"body2",color:"text.secondary",sx:{mb:1},component:"span",children:[e.description.substring(0,120),"..."]}),(0,r.jsxs)(n.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},component:"span",children:[(0,r.jsxs)(n.A,{component:"span",children:[e.tags&&e.tags.slice(0,2).map((e,t)=>(0,r.jsx)(l.A,{component:"span",sx:{display:"inline-block"},children:(0,r.jsx)(f.A,{label:e,size:"small",variant:"outlined",sx:{mr:.5}})},t)),e.tags&&e.tags.length>2&&(0,r.jsxs)(l.A,{variant:"caption",component:"span",children:["+",e.tags.length-2]})]}),(0,r.jsxs)(l.A,{variant:"caption",color:"text.secondary",component:"span",children:["创建于 ",(0,E.Yq)(e.createdAt)]})]})]})}),(0,r.jsxs)(n.A,{sx:{mb:2},children:[(0,r.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,r.jsx)(I.A,{sx:{fontSize:16,color:"primary.main",mr:1}}),(0,r.jsx)(l.A,{variant:"caption",color:"text.secondary",children:new Date(e.endDate)<new Date?"已截止":"截止于 ".concat((0,E.Yq)(e.endDate))})]}),(0,r.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,r.jsx)(R.A,{sx:{fontSize:16,color:"primary.main",mr:1}}),(0,r.jsx)(l.A,{variant:"caption",color:"text.secondary",children:"".concat((null===(s=e.tasks)||void 0===s?void 0:s.filter(e=>"COMPLETED"===e.status).length)||0,"/").concat((null===(a=e.tasks)||void 0===a?void 0:a.length)||0," 任务完成")})]}),(0,r.jsxs)(n.A,{sx:{mt:1,mb:1},children:[(0,r.jsxs)(n.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:.5},children:[(0,r.jsxs)(l.A,{variant:"caption",color:"text.secondary",children:["进度: ",e.progress||0,"%"]}),(0,r.jsx)(l.A,{variant:"caption",color:"text.primary",fontWeight:"bold",children:e.status})]}),(0,r.jsx)(v.A,{variant:"determinate",value:e.progress||0,sx:{height:5,borderRadius:5,backgroundColor:"rgba(33, 150, 243, 0.1)","& .MuiLinearProgress-bar":{background:"linear-gradient(90deg, #1976d2, #42a5f5)"}}})]})]}),(0,r.jsx)(b.A,{sx:{mb:2,opacity:.6}}),(0,r.jsxs)(n.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsx)(f.A,{label:e.category,size:"small",color:"primary",variant:"outlined",sx:{borderRadius:"6px"}}),(0,r.jsx)(w.A,{max:3,sx:{"& .MuiAvatar-root":{width:28,height:28,fontSize:"0.9rem",border:"1px solid rgba(33, 150, 243, 0.2)"}},children:e.members.map((e,t)=>(0,r.jsx)(A.A,{src:(0,E.TW)(),alt:"成员".concat(t)},t))})]})]})]})},e.id)}):(0,r.jsx)(i.Ay,{item:!0,xs:12,children:(0,r.jsxs)(n.A,{sx:{textAlign:"center",py:8,bgcolor:"rgba(33, 150, 243, 0.03)",borderRadius:2,border:"1px dashed rgba(33, 150, 243, 0.2)"},children:[(0,r.jsx)(l.A,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"没有找到符合条件的项目"}),(0,r.jsx)(l.A,{variant:"body2",color:"text.secondary",children:"尝试调整搜索条件或创建一个新项目"}),(0,r.jsx)(u.A,{variant:"contained",startIcon:(0,r.jsx)(k.A,{}),sx:{mt:3},onClick:()=>t.push("/projects/new"),children:"创建项目"})]})})}),U>1&&(0,r.jsx)(n.A,{sx:{mt:6,display:"flex",justifyContent:"center"},children:(0,r.jsx)(C.A,{count:U,page:H,onChange:(e,t)=>J(t),color:"primary",shape:"rounded",sx:{"& .MuiPaginationItem-root":{borderRadius:1}}})})]})}},59434:(e,t,s)=>{"use strict";s.d(t,{EJ:()=>l,TW:()=>r,Yq:()=>a,ZV:()=>n});let r=(e,t)=>e&&!e.includes("placeholder")?e:"/avatars/placeholder.svg",a=e=>{let t=new Date(e);return new Intl.DateTimeFormat("zh-CN",{year:"numeric",month:"long",day:"numeric"}).format(t)},n=e=>e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"k":e.toString(),l=(e,t)=>e.length<=t?e:e.slice(0,t)+"..."},75125:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(89019),a=s(95155);let n=(0,r.A)([(0,a.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,a.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"Schedule")},77499:(e,t,s)=>{Promise.resolve().then(s.bind(s,42243))}},e=>{var t=t=>e(e.s=t);e.O(0,[827,364,34,951,948,582,160,165,680,988,441,684,358],()=>t(77499)),_N_E=e.O()}]);